{"ast":null,"code":"import React from \"react\";\nimport axios from \"axios\";\nconst baseUrl = \"https://nc-news-c-matus.herokuapp.com/api\";\nexport const queryUserVoteOnArticle = (cb, voting_user, article_id) => {\n  axios.get(`${baseUrl}/articles/votes?voting_user=${voting_user}&article_id=${article_id}`).then(res => res.data).then(data => {\n    console.log(`AVJx in util, data is ${JSON.stringify(data)}`);\n\n    if (Array.isArray(data) && data.length === 0) {\n      data = {\n        article_votes_junction: []\n      };\n    } // console.log(\"**** IN UTIL\");\n    // console.log(voting_user, article_id);\n    // console.dir(data);\n\n\n    cb(data[\"article_votes_junction\"]);\n  });\n};\nexport const fetchArticleWithComments = (cb, article_id) => {\n  Promise.all([axios.get(`${baseUrl}/articles/${article_id}`).then(res => res.data), axios.get(`${baseUrl}/articles/${article_id}/comments`).then(res => res.data)]).then(resArr => {\n    const articleData = resArr[0];\n    const commentData = resArr[1];\n    console.log(777);\n    cb(null, articleData[\"article\"], commentData[\"comments\"]);\n  }).catch(err => {\n    cb(err);\n  });\n};\nexport const fetchArticles = (cb, qObj) => {\n  let qString = \"\";\n\n  if (qObj && Object.keys(qObj).length) {\n    let qStringArray = [];\n    Object.keys(qObj).forEach(qKey => qStringArray.push(`${qKey}=${qObj[qKey]}`));\n    qString = \"?\" + qStringArray.join(\"&\");\n  }\n\n  axios.get(`${baseUrl}/articles/${qString}`).then(res => res.data).then(data => {\n    cb(data[\"articles\"]);\n  });\n};\nexport const fetchArticleByID = (cb, article_id) => {\n  axios.get(`${baseUrl}/articles/${article_id}`).then(res => res.data).then(data => {\n    cb(data[\"article\"]);\n  });\n};\nexport const fetchArticleCountsByTopic = (cb, topicsArray) => {\n  console.log(topicsArray);\n  const promisesArr = [];\n  topicsArray.forEach(topic => promisesArr.push(axios.get(`${baseUrl}/articles?topic=${topic}&limit=none`).then(res => res.data)));\n  Promise.all(promisesArr).then(resArr => {\n    const articleCounts = {};\n\n    for (let i = 0; i < topicsArray.length; i++) {\n      console.log(topicsArray[i], resArr[i].articles.length);\n      articleCounts[topicsArray[i]] = resArr[i].articles.length;\n    }\n\n    cb(articleCounts);\n  });\n};\nexport const fetchUsers = cb => {\n  axios.get(`${baseUrl}/users`).then(res => res.data).then(data => {\n    cb(data[\"users\"]);\n  }).catch(err => console.log(err));\n};\nexport const fetchTopics = cb => {\n  cb([{\n    description: \"Please be civil.\",\n    slug: \"politics\"\n  }, {\n    description: \"For all pet related questions\",\n    slug: \"pets\"\n  }, {\n    description: \"Star crossed lovers\",\n    slug: \"astronomy\"\n  }, {\n    description: \"Live. Laugh. Lift.\",\n    slug: \"fitness\"\n  }, {\n    description: \"stitch me up, scotty\",\n    slug: \"embroidery\"\n  }, {\n    description: \"Code is love, code is life\",\n    slug: \"coding\"\n  }, {\n    description: \"FOOTIE!\",\n    slug: \"football\"\n  }, {\n    description: \"Hey good looking, what you got cooking?\",\n    slug: \"cooking\"\n  }]); // axios\n  //   .get(`${baseUrl}/topics`)\n  //   .then(res => res.data)\n  //   .then(data => {\n  //     cb(data[\"topics\"]);\n  //   });\n};","map":{"version":3,"sources":["/home/heihachu/fe-news/src/utils/getUtils.js"],"names":["React","axios","baseUrl","queryUserVoteOnArticle","cb","voting_user","article_id","get","then","res","data","console","log","JSON","stringify","Array","isArray","length","article_votes_junction","fetchArticleWithComments","Promise","all","resArr","articleData","commentData","catch","err","fetchArticles","qObj","qString","Object","keys","qStringArray","forEach","qKey","push","join","fetchArticleByID","fetchArticleCountsByTopic","topicsArray","promisesArr","topic","articleCounts","i","articles","fetchUsers","fetchTopics","description","slug"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nconst baseUrl = \"https://nc-news-c-matus.herokuapp.com/api\";\n\nexport const queryUserVoteOnArticle = (cb, voting_user, article_id) => {\n  axios\n    .get(\n      `${baseUrl}/articles/votes?voting_user=${voting_user}&article_id=${article_id}`\n    )\n    .then(res => res.data)\n    .then(data => {\n      console.log(`AVJx in util, data is ${JSON.stringify(data)}`);\n\n      if (Array.isArray(data) && data.length === 0) {\n        data = { article_votes_junction: [] };\n      }\n\n      // console.log(\"**** IN UTIL\");\n      // console.log(voting_user, article_id);\n      // console.dir(data);\n      cb(data[\"article_votes_junction\"]);\n    });\n};\n\nexport const fetchArticleWithComments = (cb, article_id) => {\n  Promise.all([\n    axios.get(`${baseUrl}/articles/${article_id}`).then(res => res.data),\n    axios\n      .get(`${baseUrl}/articles/${article_id}/comments`)\n      .then(res => res.data)\n  ])\n    .then(resArr => {\n      const articleData = resArr[0];\n      const commentData = resArr[1];\n      console.log(777);\n      cb(null, articleData[\"article\"], commentData[\"comments\"]);\n    })\n    .catch(err => {\n      cb(err);\n    });\n};\n\nexport const fetchArticles = (cb, qObj) => {\n  let qString = \"\";\n\n  if (qObj && Object.keys(qObj).length) {\n    let qStringArray = [];\n    Object.keys(qObj).forEach(qKey =>\n      qStringArray.push(`${qKey}=${qObj[qKey]}`)\n    );\n    qString = \"?\" + qStringArray.join(\"&\");\n  }\n  axios\n    .get(`${baseUrl}/articles/${qString}`)\n    .then(res => res.data)\n    .then(data => {\n      cb(data[\"articles\"]);\n    });\n};\n\nexport const fetchArticleByID = (cb, article_id) => {\n  axios\n    .get(`${baseUrl}/articles/${article_id}`)\n    .then(res => res.data)\n    .then(data => {\n      cb(data[\"article\"]);\n    });\n};\n\nexport const fetchArticleCountsByTopic = (cb, topicsArray) => {\n  console.log(topicsArray);\n\n  const promisesArr = [];\n\n  topicsArray.forEach(topic =>\n    promisesArr.push(\n      axios\n        .get(`${baseUrl}/articles?topic=${topic}&limit=none`)\n        .then(res => res.data)\n    )\n  );\n\n  Promise.all(promisesArr).then(resArr => {\n    const articleCounts = {};\n\n    for (let i = 0; i < topicsArray.length; i++) {\n      console.log(topicsArray[i], resArr[i].articles.length);\n      articleCounts[topicsArray[i]] = resArr[i].articles.length;\n    }\n\n    cb(articleCounts);\n  });\n};\n\nexport const fetchUsers = cb => {\n  axios\n    .get(`${baseUrl}/users`)\n    .then(res => res.data)\n    .then(data => {\n      cb(data[\"users\"]);\n    })\n    .catch(err => console.log(err));\n};\n\nexport const fetchTopics = cb => {\n  cb([\n    { description: \"Please be civil.\", slug: \"politics\" },\n    { description: \"For all pet related questions\", slug: \"pets\" },\n    { description: \"Star crossed lovers\", slug: \"astronomy\" },\n    { description: \"Live. Laugh. Lift.\", slug: \"fitness\" },\n    { description: \"stitch me up, scotty\", slug: \"embroidery\" },\n    { description: \"Code is love, code is life\", slug: \"coding\" },\n    { description: \"FOOTIE!\", slug: \"football\" },\n    { description: \"Hey good looking, what you got cooking?\", slug: \"cooking\" }\n  ]);\n  // axios\n  //   .get(`${baseUrl}/topics`)\n  //   .then(res => res.data)\n  //   .then(data => {\n  //     cb(data[\"topics\"]);\n  //   });\n};\n"]},"metadata":{},"sourceType":"module"}